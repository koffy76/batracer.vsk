<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<title>Batracer Set up adjuster VSK version</title>
		<link rel="stylesheet" href="css/bootstrap.min.css">
		<style>
			.unchecked{
				background-color: #ddd;
			}
			.unchecked td{
				border:1px solid #fff !important;
			}
			.wrap,.range{
				display:flex;
			}
			.second{
				margin-left:1rem;
			}
			.range{
				width:100%;
				justify-content:space-between;
				margin-top:1rem;
			}
			.inputRange{
				width:80%;
			}
			#result{
				min-height:53rem;
			}

		</style>
	</head>

	<body><h1>VSK weather tool v.02</h1>
		<div class="container">
			<div class="row">
				<div class="col-md-4">
					<div class="page-header">
						<h1>Car setup</h1>
					</div>
					<form class="form" role="form">
						<div class="form-group">
							<table id="main" class="table table-bordered table-hover table-condensed">
								<tr>
									<th>&nbsp;</th>
									<th>&nbsp;</th>
									<th>&nbsp;</th>
									<th>&nbsp;</th>
								</tr>
								<tr class="wings">
									<td rowspan=2><input type="checkbox" id="wings" name="wings" data-bind="checked: wings" /></td>
									<td rowspan=2>Wings</td>
									<td>Front</td>
									<td>
										<input size="3" data-bind="value: wingsFront">
									</td>
								</tr>
								<tr>
									<td>Rear</td>
									<td>
										<input size="3" data-bind="value: wingsRear">
									</td>
								</tr>
								<tr class="suspension">
									<td rowspan=2><input type="checkbox" id="suspension" name="suspension" value="true" data-bind="checked: suspension" /></td>
									<td rowspan=2>Suspension</td>
									<td>Front</td>
									<td>
										<input size="3" data-bind="value: suspensionFront">
									</td>
								</tr>
								<tr>
									<td>Rear</td>
									<td>
										<input size="3" data-bind="value: suspensionRear">
									</td>
								</tr>
								<tr class="antirollbar">
									<td rowspan=2><input type="checkbox" id="antiRollBar" name="antiRollBar" value="true" data-bind="checked: antiRollBar" /></td>
									<td rowspan=2>Anti-Roll Bar</td>
									<td>Front</td>
									<td>
										<input size="3" data-bind="value: antiRollBarFront">
									</td>
								</tr>
								<tr>
									<td>Rear</td>
									<td>
										<input size="3" data-bind="value: antiRollBarRear">
									</td>
								</tr>
								<tr class="rideheight">
									<td rowspan=2><input type="checkbox" id="rideHeight" name="rideHeight" value="true" data-bind="checked: rideHeight" /></td>
									<td rowspan=2>Ride Height</td>
									<td>Front</td>
									<td>
										<input size="3" data-bind="value: rideHeightFront">
									</td>
								</tr>
								<tr>
									<td>Rear</td>
									<td>
										<input size="3" data-bind="value: rideHeightRear">
									</td>
								</tr>
								<tr class="tyrepressure">
									<td rowspan=2><input type="checkbox" id="tyrePressure" name="tyrePressure" value="true" data-bind="checked: tyrePressure" /></td rowspan=2>
									<td rowspan=2>Tyre pressure</td rowspan=2>
									<td>Front</td>
									<td>
										<input size="3" data-bind="value: tyrePressureFront">
									</td>
								</tr>
								<tr>
									<td>Rear</td>
									<td>
										<input size="3" data-bind="value: tyrePressureRear">
									</td>
								</tr>
								<tr class="gears">
									<td><input type="checkbox" id="gears" name="gears" value="true" data-bind="checked: gearsI" /></td>
									<td>Gears</td>
									<td>&nbsp;</td>
									<td>
										<input size="3" data-bind="value: gears">
									</td>
								</tr>
								<tr style="display:none;">
									<td></td>
									<td></td>
									<td></td>
									<td></td>
								</tr>
								<tr class="brakebias">
									<td><input type="checkbox" id="brakeBias" name="brakeBias" value="true" data-bind="checked: brakeBiasI" /></td>
									<td>Brake bias</td>
									<td>&nbsp;</td>
									<td>
										<input size="3" data-bind="value: brakeBias">
									</td>
								</tr>
								<tr style="display:none;">
									<td></td>
									<td></td>
									<td></td>
									<td></td>
								</tr>
							</table>
						</div>
					</form>
				</div>

				<div class="col-md-4" style="display:none;">
					<div class="page-header">
						<h1>Setup changes</h1>
					</div>
					<form class="form" role="form">
						<div class="form-group">
							<table class="table table-bordered table-hover table-condensed">
								<tr>
									<th>&nbsp;</th>
									<th>Front</th>
									<th>Rear</th>
								</tr>
								<tr>
									<td>Wings</td>
									<td>
										<input size="3" data-bind="value: adjustWingsFront">
									</td>
									<td>
										<input size="3" data-bind="value: adjustWingsRear">
									</td>
								</tr>
								<tr>
									<td>Suspension</td>
									<td>
										<input size="3" data-bind="value: adjustSuspensionFront">
									</td>
									<td>
										<input size="3" data-bind="value: adjustSuspensionRear">
									</td>
								</tr>
								<tr>
									<td>Anti-Roll Bar</td>
									<td>
										<input size="3" data-bind="value: adjustAntiRollBarFront">
									</td>
									<td>
										<input size="3" data-bind="value: adjustAntiRollBarRear">
									</td>
								</tr>
								<tr>
									<td>Ride Height</td>
									<td>
										<input size="3" data-bind="value: adjustRideHeightFront">
									</td>
									<td>
										<input size="3" data-bind="value: adjustRideHeightRear">
									</td>
								</tr>
								<tr>
									<td>Tyre pressure</td>
									<td>
										<input size="3" data-bind="value: adjustTyrePressureFront">
									</td>
									<td>
										<input size="3" data-bind="value: adjustTyrePressureRear">
									</td>
								</tr>
								<tr>
									<td>Gears</td>
									<td>&nbsp;</td>
									<td>
										<input size="3" data-bind="value: adjustGears">
									</td>
								</tr>
								<tr>
									<td>Brake bias</td>
									<td>&nbsp;</td>
									<td>
										<input size="3" data-bind="value: adjustBrakeBias">
									</td>
								</tr>
							</table>
						</div>
					</form>
				</div>

				<div class="col-md-4">
					<div class="page-header">
						<h1>Final setup</h1>
					</div>
					<form class="form" role="form">
						<div class="form-group">
							<table class="table table-bordered table-hover table-condensed">
								<tr>
									<th>&nbsp;</th>
									<th>&nbsp;</th>
									<th>&nbsp;</th>
								</tr>
								<tr class="wings">
									<td rowspan=2>Wings</td>
									<td>Front</td>
									<td>
										<input size="3" disabled id="finalWingsFront" data-bind="value: finalWingsFront" />
									</td>
								</tr>
								<tr>
									<td>Rear</td>
									<td>
										<input size="3" disabled id="finalWingsRear" data-bind="value: finalWingsRear" />
									</td>
								</tr>
								<tr class="suspension">
									<td rowspan=2>Suspension</td>
									<td>Front</td>
									<td>
										<input size="3" disabled id="finalSuspensionFront" data-bind="value: finalSuspensionFront" />
									</td>
								</tr>
								<tr>
									<td>Rear</td>
									<td>
										<input size="3" disabled id="finalSuspensionRear" data-bind="value: finalSuspensionRear" />
									</td>
								</tr>
								<tr class="antirollbar">
									<td rowspan=2>Anti-Roll Bar</td>
									<td>Front</td>
									<td>
										<input size="3" disabled id="finalAntiRollBarFront" data-bind="value: finalAntiRollBarFront" />
									</td>
								</tr>
								<tr>
									<td>Rear</td>
									<td>
										<input size="3" disabled id="finalAntiRollBarRear" data-bind="value: finalAntiRollBarRear" />
									</td>
								</tr>
								<tr class="rideheight">
									<td rowspan=2>Ride Height</td>
									<td>Front</td>
									<td>
										<input size="3" disabled id="finalRideHeightFront" data-bind="value: finalRideHeightFront" />
									</td>
								</tr>
								<tr>
									<td>Rear</td>
									<td>
										<input size="3" disabled id="finalRideHeightRear" data-bind="value: finalRideHeightRear" />
									</td>
								</tr>
								<tr class="tyrepressure">
									<td rowspan=2>Tyre pressure</td>
									<td>Front</td>
									<td>
										<input size="3" disabled id="finalTyrePressureFront" data-bind="value: finalTyrePressureFront" />
									</td>
								</tr>
								<tr>
									<td>Rear</td>
									<td>
										<input size="3" disabled id="finalTyrePressureRear" data-bind="value: finalTyrePressureRear" />
									</td>
								</tr>
								<tr class="gears">
									<td>Gears</td>
									<td>&nbsp;</td>
									<td>
										<input size="3" disabled id="finalGears" data-bind="value: finalGears" />
									</td>
								</tr>
								<tr style="display:none;">
									<td></td>
									<td></td>
									<td></td>
									<td></td>
								</tr>
								<tr class="brakebias">
									<td>Brake bias</td>
									<td>&nbsp;</td>
									<td>
										<input size="3" disabled id="finalBrakeBias" data-bind="value: finalBrakeBias" />
									</td>
								</tr>
								<tr style="display:none;">
									<td></td>
									<td></td>
									<td></td>
									<td></td>
								</tr>
							</table>
						</div>
					</form>
				</div>

				<div class="col-md-4">
					<div class="page-header">
						<h1>Team talk RAW</h1>
					</div>
					<form class="form">
						<div id="result" class="form-group" data-bind="text: results">
	
						</div>
					</form>
				</div>

			</div>
			
			<div class="row">
				<div class="col-md-4 col-md-offset-4">
					<form class="form" role="form">
						<div class="form-group">
							<div class="wrap">
								<div class="">
									<label for="sel_weather" class="label-control">
										Weather
									</label>
									<select id="sel_weather" class="form-control"
									data-bind="options: weatherConditions,
										optionsText: 'displayName',
										value: weatherAdjustment">
									</select>
								</div>
								<div class="second">
									<label for="specification" class="label-control">
										Specification
									</label>
									<input size="3" class="form-control" type="text" id="specification" data-bind="value: specification">
								</div>
							</div>
							<div class="range">
								<div data-bind="text: rangeMin"></div>
								<div class="inputRange">
									<input type="range" class="form-control-range" id="formControlRange" data-bind="value: range, attr: {min: rangeMin, max: rangeMax}" >
								</div>
								<div data-bind="text: rangeMax"></div>
							</div>
							<div class="radio">
								<label>
									<input type="radio" id="dryToWet" name="weatherChange" value="true" data-bind="checked: dryToWet" />Dry to wet
								</label>
							</div>
							<div class="radio">
								<label>
									<input type="radio" id="wetToDry" name="weatherChange" value="false" data-bind="checked: dryToWet" />Wet to dry
								</label>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>

		<script type="text/javascript" src="js/jquery-1.11.1.min.js"></script>
		<script type="text/javascript" src="js/bootstrap.min.js"></script>
		<script type="text/javascript" src="js/knockout-latest.js"></script>
		<script type="text/javascript" src="js/app.js"></script>

	<script>

		function removeminus(numberM){
			if (numberM > 100) {
				numberM = 100;
			} else if (numberM < 0 || isNaN(numberM) || numberM === Infinity) {
				numberM = 0;
			}

			return numberM;
		}

		function getValue(alterednumber){
			if (typeof (alterednumber) === 'string'){
				alterednumber = alterednumber.replace(/\s/g, '');
				var ind = alterednumber.indexOf('-');
				if (ind > -1){
					var tmpArr = alterednumber.split('-');
					var one = '';
					var two = '';
					tmpArr.forEach(function(item,index,arr){
						if(item.length==0){
							arr[index+1] = (-1)*arr[index+1];
						}else{
							if(one.length==0){
								one = removeminus(item);
								alterednumber = one;
							}else{
								if(two.length==0){
									two = removeminus(item);
									alterednumber += '-' + two;
								}
							}
						}
					})
				}
			}else{
				alterednumber = removeminus(alterednumber);
			}

			return alterednumber;
		}

		function my_onchange(){
			var resultString = '';
			if($('#dryToWet').is(':checked')){resultString += 'WET<BR>';}
			if($('#wetToDry').is(':checked')){resultString += 'DRY<BR>';}
			
			if($('#wings').is(':checked')){
				resultString += 'Wings<BR>';
				resultString += getValue($("#finalWingsFront").val())+'<BR>';
				resultString += getValue($("#finalWingsRear").val())+'<BR>';
				resultString += '<BR>';
			}
			if($('#suspension').is(':checked')){
				resultString += 'Suspension<BR>';
				resultString += getValue($("#finalSuspensionFront").val())+'<BR>';
				resultString += getValue($("#finalSuspensionRear").val())+'<BR>';
				resultString += '<BR>';
			}
			if($('#antiRollBar').is(':checked')){
				resultString += 'Anti-Roll Bar<BR>';
				resultString += getValue($("#finalAntiRollBarFront").val())+'<BR>';
				resultString += getValue($("#finalAntiRollBarRear").val())+'<BR>';
				resultString += '<BR>';
			}
			if($('#rideHeight').is(':checked')){
				resultString += 'Ride Height<BR>';
				resultString += getValue($("#finalRideHeightFront").val())+'<BR>';
				resultString += getValue($("#finalRideHeightRear").val())+'<BR>';
				resultString += '<BR>';
			}
			if($('#tyrePressure').is(':checked')){
				resultString += 'Tyre pressure<BR>';
				resultString += getValue($("#finalTyrePressureFront").val())+'<BR>';
				resultString += getValue($("#finalTyrePressureRear").val())+'<BR>';
				resultString += '<BR>';
			}
			if($('#gears').is(':checked')){
				resultString += 'Gears<BR>';
				resultString += getValue($("#finalGears").val())+'<BR>';
				resultString += '<BR>';
			}
			if($('#brakeBias').is(':checked')){
				resultString += 'Brake bias<BR>';
				resultString += getValue($("#finalBrakeBias").val())+'<BR>';
			}

			$('#result').html(resultString);
		}

		$( document ).ready(function() {

			$('input:not([type=radio])').change(function(){
				my_onchange();
			});
			
			$('input[type=radio]').change(function(){
				setTimeout(function(){my_onchange()},250);
			});
			$('select').change(function(){
				my_onchange();
			});
			$('input[type=checkbox]').click(
				function(){
					var parentTR = $(this)[0].parentElement.parentElement;
					var parentTRN= $(parentTR).next();
					var cell2 = $(parentTR)[0].cells[3];
					var cell3 = $(parentTRN)[0].cells[1];
					var classTR = $(parentTR)[0].classList[0];
					var classTRfs = $('.'+classTR)[1];
					var classTRfsN = $(classTRfs).next();
					
					if(!$(this).is(':checked')){
						$(parentTR).addClass('unchecked');
						$(parentTRN).addClass('unchecked');
						$(cell2).attr("disabled", true);
						$(cell3).attr("disabled", true);
						$(classTRfs).addClass('unchecked');
						$(classTRfsN).addClass('unchecked');
					}else{
						$(parentTR).removeClass('unchecked');
						$(parentTRN).removeClass('unchecked');
						$(cell2).attr("disabled", false);
						$(cell3).attr("disabled", false);
						$(classTRfs).removeClass('unchecked');
						$(classTRfsN).removeClass('unchecked');
					}
				}
			)
		});

	</script>

	</body>
</html>
